<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="jungkosta.mappers.trade.TradeMapper">

<!-- insertSale_ysi -->
<insert id="insertSale" parameterType="SaleVO">
		insert into sale(sale_id, item_name, item_cost, buy_time, item_status, item_scratch, additional_info, buy_info, sale_date, email, subca_id, 
	flag, item_pic1, item_pic2, item_pic3, item_pic4) 
	values(
		#{sale_id}, #{item_name}, #{item_cost}, #{buy_time}, #{item_status}, #{item_scratch}, 
		#{additional_info}, #{buy_info}, SYSDATE, #{email}, #{subca_id}, #{flag}, 
		#{item_pic1}, #{item_pic2}, #{item_pic3}, #{item_pic4}
	)
	</insert>
	
	<!-- selectS_id_ysi -->
	<select id="selectS_id" resultType="Integer">
		select max(sale_id) from sale
	</select>


<!-- listAll_tw -->
	<select id="listSale" resultType="SaleVO">
	 select * from sale 
 	</select>

<!-- listSub_tw -->
 	<select id="listSalesub" parameterType="Integer" resultType="SaleVO"> 
	select * from sale where SUBCA_ID = #{subca_id} and flag = '0'
	</select> 

<!-- sale_tw -->
	<select id="searchSale" parameterType="int" resultType="SaleVO"> 
	select * from sale where sale_id = #{sale_id}
	</select> 
	
	<!-- searchSub_tw -->
  <select id="searchSubCategory" parameterType="int" resultType="SubCategoryVO"> 
  select distinct s1.subca_id, s1.subca_name, s1.ca_id, s2.subca_id 
  from SUB_CATEGORY s1, SALE s2 where s2.SUBCA_ID = s1.SUBCA_ID and s1.subca_id = #{subca_id} 
  </select>
   
   <!-- searchTotal_tw -->
<select id="searchTotalCategory" parameterType="int" resultType="String">
	 select distinct ca_name from SUB_CATEGORY, CATEGORY 
 	where SUB_CATEGORY.CA_ID = CATEGORY.CA_ID and 
 	category.ca_id =#{ca_id} </select>


</mapper>